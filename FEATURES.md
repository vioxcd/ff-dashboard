# Features

## Done

|           | Feature                                                                                                                   | Status | Description                                                                                                                                                                                                                                                             |
|:---------:|---------------------------------------------------------------------------------------------------------------------------|:------:|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|    API    | Fetch `progress`                                                                                                          |    ‚úÖÔ∏è   | Needed for rules                                                                                                                                                                                                                                                        |
|    API    | Fetch media `scores`                                                                                                      |    ‚úÖÔ∏è   |                                                                                                                                                                                                                                                                         |
|    API    | Fetch `rewatch` count                                                                                                     |    ‚ùåÔ∏è   | Not many people track their rewatches                                                                                                                                                                                                                                   |
|    API    | Fetch all image types for various layout uses                                                                             |    ‚úÖÔ∏è   |                                                                                                                                                                                                                                                                         |
|    API    | Fetch several missing fields for FF's AOTY                                                                                |    ‚úÖÔ∏è   | Missing: relationType (non sequel), source, and format                                                                                                                                                                                                                  |
|    API    | Fetch tags / genre / studio media data for extra analysis                                                                 |    üí≠Ô∏è   | There should be a bridge table for media-tags  Rethink: use `statistics` connection from the API instead of fetching things myself                                                                                                                                      |
|    API    | Fetch things for favorites analysis                                                                                       |    ‚úÖÔ∏è   | Anime, manga, chara, staff, and studio; only name and pictures                                                                                                                                                                                                          |
|    Data   | Implement fluff's rules                                                                                                   |    ‚úÖÔ∏è   | Rules' detail in README                                                                                                                                                                                                                                                 |
|    Data   | AOTY should take into account when the series is completed                                                                |    ‚ùåÔ∏è   | Some members' Anilist' `completedAt` property have `null` values, even though they've completed the series (probably bug from Anilist)                                                                                                                                  |
|    Data   | Favorites take items in > .9 percentile                                                                                   |    ‚úÖ   | Uses `PERCENT_RANK` sql statement                                                                                                                                                                                                                                       |
|    Data   | Anichan score can't be "inferred" from the normal score. (needs to fetch additional `score (format: POINT_100)` from API) |    ‚ùåÔ∏è   | Example: wi uses `POINT_100` format before switching to `POINT_5`, and somehow his score is still recorded as 100 instead of 90 (e.g. in Madoka Magica)                                                                                                                 |
| Dashboard | Implement layout as in design                                                                                             |    ‚úÖ   |                                                                                                                                                                                                                                                                         |
| Dashboard | Anime and Manga tab                                                                                                       |    ‚úÖ   |                                                                                                                                                                                                                                                                         |
| Dashboard | Include animanga with rating below 85                                                                                     |    ‚ùåÔ∏è   | As there's no conditional rendering in tabs, all data/images included will result in slower page load. Stick to 85+ for now                                                                                                                                             |
|    Bug    | API call uses `username` to identify users, but `username` can change                                                     |    ‚úÖ   | Track user via their IDs instead                                                                                                                                                                                                                                        |
|    Bug    | AOTY's best movie category takes into account `ONA` format with one episode                                               |    ‚úÖ   | Fetch media `episodes` data and use that in filter                                                                                                                                                                                                                      |
|    Bug    | Properly formatted score for `anichan_score` only work for 1-per-page fetches                                             |    ‚ùóÔ∏è   | Users score whose `score_format` are `POINT_5` or `POINT_3` gets "overwritten" when fetched alongside `score(format: POINT_100)` To circumvent this, each media score must be fetched one per page (the current default is 50 per page). So, it's not "batched" anymore |

## TODOs

- [Refactor] Planning to run this for the whole year ‚Äî think about how to model historical data (lineage?) and its management
- [Refactor] Create object models (class and abstract class?) for every `table create` and `save` method
- [Tidy] Source API use `score` (singular), but somehow I use `scores` (plural) as column name
- Add logic to handle `anichan_score` bugs. e.g. `if score_format is POINT_3 OR POINT_5 then fetch them one-by-one` (also needs adjust `time.sleep` call)
- Add `anichan_score` in the dashboard (as this is what's used in the `#ranking` channel)
- Download all used images in local
- ‚ú®  Fluffy Folks's anime of the year 2022 ‚ú® tab
- Tags / genre / studio analysis tab
- Favorites tab (analysis!)
- Most divisive (highest standard dev) & most differed from AL tab (biggest rating difference between fluff and AL)
- üèÖ 90+, ü•à 85+, ü•â 80+ sections (use `expander`)
- Redirect to page on link click
- Various way to sort and filter (sort by: most watched, most favorited, most rewatched count. fetch accordingly)
- Track score changes overtime and display who contributed to the change
- Similarity profile between members
